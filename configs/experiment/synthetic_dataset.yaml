# @package _global_
defaults:
  - override /submodule: [dataset, model, train, predict, analysis, visualize]
  - _self_

hydra:
  mode: RUN #MULTIRUN

# The submodule parameters set below will be used only if RUN mode is used. 
# Otherwise, it uses the default parameters imported from the other config files in the submodule directory.
submodule:

  dataset:
    # Generate train and validation dataset from scratch
    experimental_datasets:
      Sines0000: null
      Lorenz0000: all
      Kato2015: null
      Nichols2017: null
      Skora2018: null
      Uzel2022: null
      Kaplan2020: null
      Flavell2023: null
      Leifer2023: null

    use_these_datasets:
      path: null # options: null, data/datasets/<DatasetFolder>
      num_worms: all # options: int, null, all

    save_datasets: true

    num_named_neurons: all
    num_train_samples: 256
    num_val_samples: 256
    seq_len: 200
    reverse: false
    use_residual: false
    smooth_data: true

  model:
    # Train model from scratch
    type: NetworkLSTM
    input_size: 302
    hidden_size: 256
    loss: MSE
    fft_reg_param: 0.0
    l1_reg_param: 0.0
    use_this_pretrained_model: null

  train:
    optimizer: AdamW
    lr: 0.0001
    epochs: 100 
    save_freq: 100
    batch_size: 64
    shuffle: true
    early_stopping:
      # Minimum change in validation loss to be considered an improvement
      delta: 0
      # Number of epochs to wait for improvement before stopping
      patience: 50

  predict:
    # Choose the worms that you want to predict.
    # Note that the validation data set must have been generated.
    experimental_datasets:
      # null = don't predict on this dataset
      # all = predict on all the worms in the dataset
      # positive integer = use this number of worms from the dataset (random pick)
      Sines0000: null
      Lorenz0000: all
      Kato2015: null
      Nichols2017: null
      Skora2018: null
      Uzel2022: null
      Kaplan2020: null
      Flavell2023: null
      Leifer2023: null
    # Number of time steps to generate 
    nb_ts_to_generate: null
    context_window: 200

  analysis:
    analyse_this_log_dir: null
    # Validate using some worms from each dataset
    validation:
      experimental_datasets:
        Sines0000: null
        Lorenz0000: all
        Kato2015: null
        Nichols2017: null
        Skora2018: null
        Uzel2022: null
        Kaplan2020: null
        Flavell2023: null
        Leifer2023: null

  visualize:
    plot_figures_from_this_log_dir: null
    predict:
      worms_to_plot: null # plot all predicted worms
      neurons_to_plot: 3

experiment:
  name: synthetic_dataset
  mode: RUN
  seed: null # options: int, null (random seed)