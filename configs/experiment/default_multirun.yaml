# @package _global_
defaults:
  - override /submodule: [preprocess, dataset, model, train, predict, analysis, visualize]
  - _self_

hydra:
  mode: MULTIRUN
  sweeper:
      params:
        experiment.seed: range(5) # assign each repetition of the experiment a distinct random seed
        submodule.model.type: LinearNN, NetworkLSTM, NeuralTransformer # NeuralCFC, NetworkRNN

# The submodule parameters set below will be used only if RUN mode is used. 
# Otherwise, it uses the default parameters imported from the other config files in the submodule directory.
submodule:

  # Generate train and validation dataset from scratch
  dataset:
    # null = don't use on this dataset
    # all = use all the worms in the dataset
    # <int> = use this number of (randomly picked) worms from the dataset
    # <str> = use this wormID particular worm in the dataset
    # <list> = use the worms with wormIDs in the list
    experimental_datasets:
      # Sines0000: all
      # Lorenz0000: all
      VanDerPol0000: all
      # RandWalk0000: all
      # Kato2015: all
      # Nichols2017: all
      # Skora2018: all
      # Uzel2022: all
      # Yemini2021: all
      # Kaplan2020: all
      # Flavell2023: all
      # Leifer2023: all

    use_these_datasets:
      path: null # options: null, data/datasets/<DatasetFolder>
      num_worms: null # options: null,  <int>

    save_datasets: false

    num_named_neurons: null
    num_train_samples: 32
    num_val_samples: 16
    seq_len: 200
    reverse: false
    use_residual: false
    smooth_data: true

  # Build model from scratch
  model:
    input_size: 302
    hidden_size: 512
    loss: MSE
    fft_reg_param: 0.0
    l1_reg_param: 0.0
    use_this_pretrained_model: null

  # Train model
  train:
    optimizer: AdamW
    lr: 0.001
    epochs: 100 
    save_freq: 100
    batch_size: 64
    shuffle: true
    reverse: false
    early_stopping:
      delta: 0
      patience: 50

  # Choose the worms that you want to predict 
  predict:
    # null = don't predict on this dataset
    # all = predict all the worms in the dataset
    # <int> = use this number of (randomly picked) worms from the dataset
    # <str> = predict the worm with this particular wormID 
    # <list> = predict the worms with wormIDs in the list
    experimental_datasets:
      # Sines0000: worm0
      # Lorenz0000: worm0
      VanDerPol0000: worm0
      # Kato2015: worm0
      # Nichols2017: worm0
      # Skora2018: worm0
      # Uzel2022: worm0
      # Yemini2021: worm0
      # Kaplan2020: worm0
      # Flavell2023: worm0
      # Leifer2023: worm0
    # Number of time steps to generate 
    # null = generate all remaining time steps (max_timesteps - context_window)
    nb_ts_to_generate: null 
    context_window: 200

  analysis:
    analyse_this_log_dir: null
    # Validate using some worms from each dataset
    validation:
      # null = don't analyze on this dataset
      # all = analyze all the worms in the dataset
      # <int> = use this number of (randomly picked) worms from the dataset
      # <str> = analyze the worm with this particular wormID 
      # <list> = analyze the worms with wormIDs in the list
      experimental_datasets:
        # Sines0000: 5
        # Lorenz0000: 5
        VanDerPol0000: 5
        # Kato2015: 5
        # Nichols2017: 5
        # Skora2018: 5
        # Uzel2022: 5
        # Yemini2021: 5
        # Kaplan2020: 5
        # Flavell2023: 5
        # Leifer2023: 5

  visualize:
    plot_figures_from_this_log_dir: null
    predict:
      # null = plot all the neurons/worms in the dataset
      # <list> = plot the worms named in the list
      # <int> = plot this number of (randomly picked) worms
      worms_to_plot: null
      neurons_to_plot: 3

experiment:
  # What parameter you are experimenting with (key)
  # Options: num_time_steps, time_steps_per_neuron, num_named_neurons,
  #          num_train_samples, hidden_size, batch_size, seq_len, learn_rate,
  #          model_type, loss_type, optimizer_type, num_parameters,
  #          computation_time, computation_flops
  key: model_type
  mode: MULTIRUN
  seed: null # options: null (random seed), <int>