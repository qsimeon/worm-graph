# @package _global_
# File name: size_ffnn_synthetic.yaml
#   size = model size (key: num_parameters)
#   ffnn = FeatureFFNN model
#   synthetic = synthetic datasets (Sines, Lorenz, VanDerPol, RandWalk, WhiteNoise)
# We increase gradually the hidden size of the models as a way to increase the number of parameters.
defaults:
  - override /submodule: [preprocess, model, train, visualize]
  - _self_

hydra:
  # The sweeper params will be used only when MULTIRUN mode is used.
  # Uses the submodule parameters if in RUN mode.
  mode: MULTIRUN
  sweeper:
    params:
      submodule.model.hidden_size: choice(8,10,12,16,20,26,33,42,54,68,87,110,140,178,227,288,366,465,590,750,953,1210,1537,1952,2479,3149,3999,5079,6450,8192)
      experiment.seed: 0 
      submodule.dataset.use_these_datasets.path: /om2/user/qsimeon/worm-graph/data/validation_Sines0000
      submodule.dataset.experimental_datasets: choice({Sines0000:all})
      submodule.predict.experimental_datasets: choice({Sines0000:[worm0, worm1]})
      submodule.analysis.validation.experimental_datasets: choice({Sines0000:all})
      # ###############################################################################################
      ### SINES ###
      # submodule.model.hidden_size: choice(8,10,12,16,20,26,33,42,54,68,87,110,140,178,227,288,366,465,590,750,953,1210,1537,1952,2479,3149,3999,5079,6450,8192)
      # experiment.seed: 0 
      # submodule.dataset.use_these_datasets.path: /om2/user/qsimeon/worm-graph/data/validation_Sines0000
      # submodule.dataset.experimental_datasets: choice({Sines0000:all})
      # submodule.predict.experimental_datasets: choice({Sines0000:[worm0, worm1]})
      # submodule.analysis.validation.experimental_datasets: choice({Sines0000:all})
      # ###############################################################################################
      ### LORENZ ###
      # submodule.model.hidden_size: choice(8,10,12,16,20,26,33,42,54,68,87,110,140,178,227,288,366,465,590,750,953,1210,1537,1952,2479,3149,3999,5079,6450,8192)
      # experiment.seed: 1 
      # submodule.dataset.use_these_datasets.path: /om2/user/qsimeon/worm-graph/data/validation_Lorenz0000
      # submodule.dataset.experimental_datasets: choice({Lorenz0000:all})
      # submodule.predict.experimental_datasets: choice({Lorenz0000:worm0})
      # submodule.analysis.validation.experimental_datasets: choice({Lorenz0000:all})
      # ###############################################################################################
      ### WHITE NOISE ###
      # submodule.model.hidden_size: choice(8,10,12,16,20,26,33,42,54,68,87,110,140,178,227,288,366,465,590,750,953,1210,1537,1952,2479,3149,3999,5079,6450,8192)
      # experiment.seed: 2 
      # submodule.dataset.use_these_datasets.path: /om2/user/qsimeon/worm-graph/data/validation_WhiteNoise0000
      # submodule.dataset.experimental_datasets: choice({WhiteNoise0000:all})
      # submodule.predict.experimental_datasets: choice({WhiteNoise0000:worm0})
      # submodule.analysis.validation.experimental_datasets: choice({WhiteNoise0000:all})
      # ###############################################################################################
      ### RAND WALK ###
      # submodule.model.hidden_size: choice(8,10,12,16,20,26,33,42,54,68,87,110,140,178,227,288,366,465,590,750,953,1210,1537,1952,2479,3149,3999,5079,6450,8192)
      # experiment.seed: 3
      # submodule.dataset.use_these_datasets.path: /om2/user/qsimeon/worm-graph/data/validation_RandWalk0000
      # submodule.dataset.experimental_datasets: choice({RandWalk0000:all})
      # submodule.predict.experimental_datasets: choice({RandWalk0000:worm0})
      # submodule.analysis.validation.experimental_datasets: choice({RandWalk0000:all})
      # ###############################################################################################
      ### VAN DER POL ###
      # submodule.model.hidden_size: choice(8,10,12,16,20,26,33,42,54,68,87,110,140,178,227,288,366,465,590,750,953,1210,1537,1952,2479,3149,3999,5079,6450,8192)
      # experiment.seed: 4
      # submodule.dataset.use_these_datasets.path: /om2/user/qsimeon/worm-graph/data/validation_VanDerPol0000
      # submodule.dataset.experimental_datasets: choice({VanDerPol0000:all})
      # submodule.predict.experimental_datasets: choice({VanDerPol0000:worm0})
      # submodule.analysis.validation.experimental_datasets: choice({VanDerPol0000:all})
      # ###############################################################################################

submodule:
  
  dataset:
    # Set path to a directory with a fixed train and validation set
    use_these_datasets:
      # This gets overwritten by the sweeper
      path: null
      num_worms: null

    save_datasets: false

    # No need to remake the datasets if we are using a fixed dataset
    experimental_datasets:
      # This gets overwritten by the sweeper
      Sines0000: null
      Lorenz0000: null
      WhiteNoise0000: null
      RandWalk0000: null
      VanDerPol0000: null

    num_named_neurons: null
    num_train_samples: 64
    num_val_samples: 32
    # Set to the same value as submodule.predict.context_window
    seq_len: 100
    reverse: false
    use_residual: false
    smooth_data: true
    train_split_first: true
    train_split_ratio: 0.5

  # Build model from scratch
  model:
    type: FeatureFFNN
    # This gets overwritten by the sweeper
    hidden_size: null

  predict:
    # This gets overwritten by the sweeper
    experimental_datasets:
      Sines0000: null
      Lorenz0000: null
      WhiteNoise0000: null
      RandWalk0000: null
      VanDerPol0000: null
    # Number of time steps to generate
    nb_ts_to_generate: null
    # Set to the same value as submodule.dataset.seq_len
    context_window: 100

  analysis:
    analyse_this_log_dir: null
    validation:
      # This gets overwritten by the sweeper
      experimental_datasets:
        Sines0000: null
        Lorenz0000: null
        WhiteNoise0000: null
        RandWalk0000: null
        VanDerPol0000: null

experiment:
  key: num_parameters
  name: size_ffnn_synthetic
  mode: MULTIRUN